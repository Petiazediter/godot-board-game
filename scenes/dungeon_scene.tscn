[gd_scene load_steps=18 format=4 uid="uid://c3infstfxxmom"]

[ext_resource type="Script" path="res://nodes/World/WorldLogic.gd" id="1_3s3vt"]
[ext_resource type="Texture2D" uid="uid://cs7fscaau8xqv" path="res://icon.svg" id="1_6dklj"]
[ext_resource type="Script" path="res://nodes/CharacterManager/PlayableCharacter/PlayableCharacterLogic.gd" id="1_j8ss1"]
[ext_resource type="Texture2D" uid="uid://db2303dtijlba" path="res://tilemap1.png" id="1_m128l"]
[ext_resource type="Script" path="res://nodes/AstarTileMap/AstarTileMap.gd" id="3_c1bek"]
[ext_resource type="Script" path="res://nodes/CharacterManager/CharacterManagerLogic.gd" id="4_8fqq0"]
[ext_resource type="Script" path="res://nodes/AstarTileMap/DynamicObstacle/DynamicObstacleLogic.gd" id="4_kwyi4"]
[ext_resource type="PackedScene" uid="uid://bay4o8vqqc0gj" path="res://nodes/CharacterManager/PlayableCharacter/PlayableCharacter.tscn" id="5_np5tb"]
[ext_resource type="Script" path="res://nodes/AstarDebug/AstarDebug.gd" id="7_nqwlc"]
[ext_resource type="Script" path="res://nodes/AvailableCharacterList/AvailableCharactersListLogic.gd" id="8_2dj0u"]
[ext_resource type="Script" path="res://nodes/ActionManager/ActionManager.gd" id="9_8xw22"]
[ext_resource type="Script" path="res://nodes/AstarTileMap/AstarGridVisibility/AstarGridVisibilityLogic.gd" id="9_34ekb"]
[ext_resource type="Script" path="res://nodes/CharacterManager/CharacterMovementManager/CharacterMovemenetManager.gd" id="9_jktph"]
[ext_resource type="Script" path="res://nodes/DraggableCamera/DraggableCamera.gd" id="12_ps0li"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_bvpq2"]
texture = ExtResource("1_m128l")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/custom_data_0 = true
1:0/0 = 0

[sub_resource type="TileSet" id="TileSet_gk0af"]
tile_size = Vector2i(128, 128)
custom_data_layer_0/name = "is_walkable"
custom_data_layer_0/type = 1
sources/0 = SubResource("TileSetAtlasSource_bvpq2")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qfhvg"]

[node name="DungeonScene" type="Node2D"]
script = ExtResource("1_3s3vt")

[node name="Board" type="TileMapLayer" parent="." node_paths=PackedStringArray("camera", "character_manager", "astar_grid")]
use_parent_material = true
tile_map_data = PackedByteArray("AAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAADAAMAAAABAAAAAAADAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAABAAAAAAAFAAMAAAAAAAAAAAAFAAQAAAAAAAAAAAAEAAQAAAABAAAAAAADAAQAAAABAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAADAAUAAAAAAAAAAAAEAAUAAAAAAAAAAAAFAAUAAAAAAAAAAAAFAAIAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAAHAAUAAAAAAAAAAAAHAAQAAAAAAAAAAAAHAAMAAAAAAAAAAAAHAAIAAAAAAAAAAAAIAAIAAAAAAAAAAAAIAAMAAAAAAAAAAAAIAAQAAAAAAAAAAAAIAAUAAAAAAAAAAAAIAAYAAAAAAAAAAAAHAAYAAAAAAAAAAAAGAAYAAAAAAAAAAAAFAAYAAAAAAAAAAAAEAAYAAAAAAAAAAAAEAAcAAAAAAAAAAAAFAAcAAAAAAAAAAAAGAAcAAAAAAAAAAAAHAAcAAAAAAAAAAAAIAAcAAAAAAAAAAAAJAAcAAAAAAAAAAAAJAAYAAAAAAAAAAAAJAAUAAAAAAAAAAAAJAAQAAAAAAAAAAAALAAMAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAAMAAUAAAAAAAAAAAANAAUAAAAAAAAAAAANAAQAAAAAAAAAAAANAAMAAAAAAAAAAAANAAIAAAAAAAAAAAANAAEAAAAAAAAAAAAMAAEAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAAMAAQAAAAAAAAAAAAMAAIAAAAAAAAAAAAJAAEAAAAAAAAAAAAIAAEAAAAAAAAAAAAKAAEAAAAAAAAAAAAJAAIAAAABAAAAAAAJAAMAAAABAAAAAAAKAAIAAAABAAAAAAAKAAMAAAABAAAAAAAKAAQAAAABAAAAAAAKAAUAAAABAAAAAAALAAcAAAAAAAAAAAAMAAcAAAAAAAAAAAANAAcAAAAAAAAAAAAMAAYAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_gk0af")
script = ExtResource("3_c1bek")
camera = NodePath("../Camera2D")
character_manager = NodePath("../CharacterManager")
astar_grid = NodePath("../Camera2D/AstarGridVisibilty")

[node name="ObstacleObject" type="Node2D" parent="Board"]
position = Vector2(896, 384)
script = ExtResource("4_kwyi4")

[node name="Sprite2D" type="Sprite2D" parent="Board/ObstacleObject"]
texture = ExtResource("1_6dklj")
offset = Vector2(64, 64)

[node name="CharacterManager" type="Node" parent="." node_paths=PackedStringArray("board", "character_movement_manager", "main_camera")]
script = ExtResource("4_8fqq0")
board = NodePath("../Board")
character_movement_manager = NodePath("../ActionManager/CharacterMovementManager")
main_camera = NodePath("../Camera2D")

[node name="Character" parent="CharacterManager" instance=ExtResource("5_np5tb")]

[node name="Character2" type="CharacterBody2D" parent="CharacterManager"]
position = Vector2(1536, 512)
script = ExtResource("1_j8ss1")

[node name="PlayerSprite" type="Sprite2D" parent="CharacterManager/Character2"]
texture = ExtResource("1_6dklj")
offset = Vector2(64, 64)

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterManager/Character2"]
position = Vector2(64, 64)
scale = Vector2(5, 5)
shape = SubResource("RectangleShape2D_qfhvg")

[node name="ActionManager" type="Node" parent="." node_paths=PackedStringArray("character_manager")]
script = ExtResource("9_8xw22")
character_manager = NodePath("../CharacterManager")

[node name="CharacterMovementManager" type="Node2D" parent="ActionManager" node_paths=PackedStringArray("board")]
script = ExtResource("9_jktph")
board = NodePath("../../Board")
character_movement_speed = 300.0

[node name="Line2D" type="Line2D" parent="."]
position = Vector2(384, 256)
points = PackedVector2Array(384, 256)
default_color = Color(0.259356, 0.548116, 0.546875, 1)

[node name="UI" type="CanvasLayer" parent="."]

[node name="AvailableCharactersContainer" type="HBoxContainer" parent="UI" node_paths=PackedStringArray("character_manager")]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -195.0
offset_right = 249.0
grow_vertical = 0
theme_override_constants/separation = 20
script = ExtResource("8_2dj0u")
character_manager = NodePath("../../CharacterManager")

[node name="Camera2D" type="Camera2D" parent="."]
script = ExtResource("12_ps0li")
auto_focus_speed = 1000.0

[node name="AstarGridVisibilty" type="Control" parent="Camera2D" node_paths=PackedStringArray("board")]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("9_34ekb")
board = NodePath("../../Board")

[node name="AstarDebug" type="Control" parent="Camera2D" node_paths=PackedStringArray("character_movement_manager", "board")]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("7_nqwlc")
character_movement_manager = NodePath("../../ActionManager/CharacterMovementManager")
board = NodePath("../../Board")
metadata/_edit_use_anchors_ = true
